<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Set和Map数据结构</title>
  </head>
  <body>
    <div id="myDiv"></div>
    <div></div>
    <div></div>
    <script>
      // const s = new Set();
      // let arr = [2, 3, 5, 4, 5, 2, 2];
      // arr.forEach((x) => s.add(x));
      // for (let i of s) {
      //   console.log(s); // [2, 3, 4, 5]
      // }

      // 例一
      // const arr = [1, 2, 3, 4, 5];
      // const s = new Set(arr);
      // console.log([...s]); // [1, 2, 3, 4, 5]

      // // 例二
      // const s = new Set([1, 2, 3, 4, 5, 5, 5, 5]);
      // console.log([...s]); // [1, 2, 3, 4, 5]

      // // 例三
      // const s = new Set(document.querySelectorAll("div"));
      // console.log([...s]); // [div, div, div]

      // // 类似于
      // const set = new Set();
      // document.querySelectorAll("div").forEach((div) => set.add(div));
      // console.log(set.size); // 3

      // // 去除数据成员重复值
      // const array = [1, 2, 3, 4, 5, 5, 5, 5];
      // console.log([...new Set(array)]); // [1, 2, 3, 4, 5]

      // console.log([...new Set("ababbc")].join(",")); // a,b,c

      // let set = new Set();
      // let a = NaN;
      // let b = NaN;
      // set.add(a);
      // set.add(b);
      // console.log(set); // Set(1) {NaN}

      // let set = new Set();
      // set.add({});
      // console.log(set.size); // 1

      // set.add({});
      // console.log(set.size); // 2

      // Set操作方法
      // const s = new Set();
      // console.log(s.add(1).add(2).add(2)); // Set(2) {1, 2}
      // console.log(s.size); // 2
      // console.log(s.has(1)); // true
      // console.log(s.has(2)); // true
      // console.log(s.has(3)); // false
      // console.log(s.delete(2)); // true
      // console.log(s.has(2)); // false

      // // 对象写法
      // let properties = {
      //   width: 1,
      //   height: 1,
      // };
      // if (properties[someName]) {
      //   // do somethins
      // }

      // // Set写法
      // const properties = new Set();
      // properties.add("width");
      // properties.add("height");

      // if (properties.has(someName)) {
      //   // do something
      // }
      // const items = new Set([1, 2, 3, 4, 5]);
      // const array = Array.from(items);
      // console.log(array); // [1, 2, 3, 4, 5]
      // function dedupe(array) {
      //   return Array.from(new Set(array));
      // }
      // console.log(dedupe([1, 2, 3, 3, 5])); // [1, 2, 3, 5]
      // let set = new Set(["red", "green", "blue"]);
      // for (let item of set.keys()) {
      //   console.log(item);
      //   // red
      //   // green
      //   // blue
      // }
      // for (let item of set.values()) {
      //   console.log(item);
      //   // red
      //   // green
      //   // blue
      // }
      // for (let item of set.entries()) {
      //   console.log(item);
      //   // ['red', 'red']
      //   // ['green', 'green']
      //   // ['blue', 'blue']
      // }

      // set.forEach((item) => console.log(item));
      // console.log(Set.prototype[Symbol.iterator] === Set.prototype.values); // true
      // let set = new Set(["red", "green", "blue"]);
      // for (let item of set) {
      //   console.log(item);
      //   // red
      //   // green
      //   // blue
      // }
      // let a = new Set([1, 2, 3]);
      // let b = new Set([4, 3, 2]);

      // // 并集
      // let union = new Set([...a, ...b]);
      // console.log(union); // Set(4) {1, 2, 3, 4}

      // // 交集
      // let intersect = new Set([...a].filter((x) => b.has(x)));
      // console.log(intersect); // Set(2) {2, 3}

      // // 差集
      // let difference = new Set([...a].filter((x) => !b.has(x)));
      // console.log(difference); // Set(1) {1}

      // const ws = new WeakSet();
      // ws.add(1); // Uncaught TypeError: Invalid value used in weak set
      // ws.add(Symbol()); // Uncaught TypeError: Invalid value used in weak set
      // const ws = new WeakSet();
      // const a = [
      //   [1, 2],
      //   [1, 2],
      // ];
      // const ws = new WeakSet(a);
      // console.log(ws); // {[1, 2], [1, 2]}
      // const b = [3, 4];
      // const ws = new WeakSet(b);
      // console.log(ws); // Uncaught TypeError: Invalid value used in weak set

      // const ws = new WeakSet();
      // const obj = {};
      // const foo = {};

      // console.log(ws.add(obj));
      // console.log(ws.add(foo));

      // console.log(ws.has(obj)); // true
      // console.log(ws.has(foo)); // true

      // console.log(ws.delete(foo)); // false
      // console.log(ws.has(foo)); // false

      // console.log(ws.size); // undefined
      // console.log(ws.forEach()); // ws.forEach is not a function

      // const foos = new WeakSet();
      // class Foo {
      //   constructorat() {
      //     foos.add(this);
      //   }
      //   method() {
      //     if (!foos.has(this)) {
      //       throw new TypeError("Foo.prototype.method 只能在Foo的实例上调用！");
      //     }
      //   }
      // }

      // const data = {};
      // const element = document.getElementById("myDiv");

      // data[element] = "metadata";
      // console.log(data["[Object HTMLDivElement]"]);
      // const m = new Map();
      // const o = {
      //   p: "hello world",
      // };
      // console.log(m.set(o, "content"));
      // console.log(m.get(o)); // content
      // console.log(m.has(o)); // true
      // console.log(m.delete(o)); // true
      // console.log(m.has(0)); // false

      // const map = new Map([
      //   ["name", "张三"],
      //   ["title", "author"],
      // ]);
      // console.log(map.size); // 2
      // console.log(map.has("name")); // true
      // console.log(map.get("name")); // 张三
      // console.log(map.has("title")); // true
      // console.log(map.get("title")); // author

      // const items = [
      //   ["name", "张三"],
      //   ["title", "author"],
      // ];
      // const map = new Map();
      // items.forEach(([key, value]) => map.set(key, value));
      // console.log(map); //  {'name' => '张三', 'title' => 'author'}

      // const set = new Set([
      //   ["foo", 1],
      //   ["bar", 2],
      // ]);
      // const m1 = new Map(set);
      // console.log(m1.get("foo")); // 1

      // const m2 = new Map([["baz", 3]]);
      // const m3 = new Map(m2);
      // console.log(m3.get("baz")); // 3`

      // const map = new Map();
      // map.set(1, "aaa").set(1, "bbb");
      // console.log(map.get(1)); // "bbb"

      // console.log(new Map().get("aaa")); // undefined
      // const map = new Map();

      // console.log(map.set(["a"], 555)); // Map(1) {Array(1) => 555}
      // console.log(map.get(["a"])); // undefined

      // const map = new Map();
      // const k1 = ["a"];
      // const k2 = ["b"];
      // map.set(k1, 111).set(k2, 222);
      // console.log(map.get(k1)); // 111
      // console.log(map.get(k2)); // 222

      // const map = new Map();
      // map.set(-0, 123);
      // console.log(map.get(+0)); // 123

      // map.set(true, 1);
      // map.set("true", 2);
      // console.log(map.get(true)); // 1

      // map.set(undefined, 3);
      // map.set(null, 4);
      // console.log(map.get(undefined)); // 3

      // map.set(NaN, 123);
      // console.log(map.get(NaN)); // 123
      /*  const map = new Map();
      map.set("foo", true);
      map.set("bar", false);
      console.log(map.size); // 2 */
      // const myMap = new Map().set(true, 7).set({ foo: 3 }, ["abc"]);
      // console.log([...myMap]); // [[true, 7], [{foo: 3}, ["abc"]]]
      // const items = [
      //   ["foo", 1],
      //   ["bar", 2],
      // ];
      // const map = new Map(items);
      // console.log(map); // Map(2) {'foo' => 1, 'bar' => 2}

      // function strMapToObj(strMap) {
      //   let obj = Object.create(null);
      //   for (let [k, v] of strMap) {
      //     obj[k] = v;
      //   }
      //   return obj;
      // }
      // const myMap = new Map().set("yse", true).set("no", false);
      // console.log(strMapToObj(myMap)); // {yse: true, no: false}

      // function objToStrMap(obj) {
      //   let strMap = new Map();
      //   for (let k of Object.keys(obj)) {
      //     strMap.set(k, obj[k]);
      //   }
      //   return strMap;
      // }
      // console.log(objToStrMap({ yse: true, no: false })); // Map(2) {'yse' => true, 'no' => false}

      // function strMapToJson(strMap) {
      //   return JSON.stringify(strMapToObj(strMap));
      // }
      // let myMap = new Map().set("yse", true).set("no", false);
      // console.log(strMapToJson(myMap)); // {"yse":true,"no":false}

      // function mapToArrayJson(map) {
      //   return JSON.stringify([...map]);
      // }

      // let myMap = new Map().set(true, 7).set({ foo: 3 }, ["abc"]);
      // console.log(mapToArrayJson(myMap)); // [[true,7],[{"foo":3},["abc"]]]

      // function jsonToStrMap(jsonStr) {
      //   return objToStrMap(JSON.parse(jsonStr));
      // }
      // console.log(jsonToStrMap('{"yes": true, "no": false}')); // Map(2) {'yes' => true, 'no' => false}

      function jsonToMap(jsonStr) {
        return new Map(JSON.parse(jsonStr));
      }
      console.log(jsonToMap('[[true,7],[{"foo":3},["abc"]]]')); // Map {true => 7, Object {foo: 3} => ['abc']}
    </script>
  </body>
</html>
